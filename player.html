<!DOCTYPE html>
<html>
<head>
    <title>Stony 250</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            color: white;
            font-family: Arial;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            touch-action: manipulation;
            cursor: pointer;
        }
        h1 {
            text-align: center;
            margin: 0;
            padding: 20px;
            user-select: none;
        }
    </style>
</head>
<body>

<h1>Stony 250</h1>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const audio = new Audio('https://www.myinstants.com/media/sounds/stony-250.mp3?_=' + Date.now());
        audio.volume = 1.0;

        // Хитрость: создаем прозрачный iframe с autoplay
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.sandbox = 'allow-same-origin allow-scripts';
        iframe.src = URL.createObjectURL(new Blob([
            `<!DOCTYPE html><html><body>
            <audio autoplay loop src="${audio.src}"></audio>
            <script>document.querySelector('audio').play();<\/script>
            </body></html>`
        ], {type: 'text/html'}));
        document.body.appendChild(iframe);

        // Основная попытка воспроизведения
        const tryPlay = () => {
            audio.play().catch(e => {
                console.log("Основное воспроизведение заблокировано");
            });
        };

        // Первая попытка воспроизведения
        tryPlay();

        // Воспроизведение при клике
        document.body.addEventListener('click', () => {
            audio.currentTime = 0;
            audio.play().catch(e => {
                // Если не удалось, пробуем через iframe
                iframe.contentWindow.postMessage('play', '*');
            });
        });

        // Для мобильных устройств - обработка touchstart
        document.body.addEventListener('touchstart', () => {
            audio.currentTime = 0;
            audio.play().catch(e => {
                iframe.contentWindow.postMessage('play', '*');
            });
        }, {passive: true});
    });
</script>

</body>
</html>